{"version":3,"sources":["@wordpress/blocks/src/api/raw-handling/html-to-blocks.js"],"names":["createBlock","findTransform","getBlockAttributes","getRawTransforms","htmlToBlocks","html","doc","document","implementation","createHTMLDocument","body","innerHTML","Array","from","children","flatMap","node","rawTransform","isMatch","outerHTML","transform","blockName"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAT,EAAsBC,aAAtB,QAA2C,YAA3C;AACA,SAASC,kBAAT,QAAmC,gCAAnC;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,YAAT,CAAuBC,IAAvB,EAA8B;AACpC,QAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwBC,kBAAxB,CAA4C,EAA5C,CAAZ;AAEAH,EAAAA,GAAG,CAACI,IAAJ,CAASC,SAAT,GAAqBN,IAArB;AAEA,SAAOO,KAAK,CAACC,IAAN,CAAYP,GAAG,CAACI,IAAJ,CAASI,QAArB,EAAgCC,OAAhC,CAA2CC,IAAF,IAAY;AAC3D,UAAMC,YAAY,GAAGhB,aAAa,CACjCE,gBAAgB,EADiB,EAEjC,CAAE;AAAEe,MAAAA;AAAF,KAAF,KAAmBA,OAAO,CAAEF,IAAF,CAFO,CAAlC;;AAKA,QAAK,CAAEC,YAAP,EAAsB;AACrB,aAAOjB,WAAW,EACjB;AACA,iBAFiB,EAGjBE,kBAAkB,CAAE,WAAF,EAAec,IAAI,CAACG,SAApB,CAHD,CAAlB;AAKA;;AAED,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAA2BJ,YAAjC;;AAEA,QAAKG,SAAL,EAAiB;AAChB,aAAOA,SAAS,CAAEJ,IAAF,CAAhB;AACA;;AAED,WAAOhB,WAAW,CACjBqB,SADiB,EAEjBnB,kBAAkB,CAAEmB,SAAF,EAAaL,IAAI,CAACG,SAAlB,CAFD,CAAlB;AAIA,GAxBM,CAAP;AAyBA","sourcesContent":["/**\n * Internal dependencies\n */\nimport { createBlock, findTransform } from '../factory';\nimport { getBlockAttributes } from '../parser/get-block-attributes';\nimport { getRawTransforms } from './get-raw-transforms';\n\n/**\n * Converts HTML directly to blocks. Looks for a matching transform for each\n * top-level tag. The HTML should be filtered to not have any text between\n * top-level tags and formatted in a way that blocks can handle the HTML.\n *\n * @param {string} html HTML to convert.\n *\n * @return {Array} An array of blocks.\n */\nexport function htmlToBlocks( html ) {\n\tconst doc = document.implementation.createHTMLDocument( '' );\n\n\tdoc.body.innerHTML = html;\n\n\treturn Array.from( doc.body.children ).flatMap( ( node ) => {\n\t\tconst rawTransform = findTransform(\n\t\t\tgetRawTransforms(),\n\t\t\t( { isMatch } ) => isMatch( node )\n\t\t);\n\n\t\tif ( ! rawTransform ) {\n\t\t\treturn createBlock(\n\t\t\t\t// Should not be hardcoded.\n\t\t\t\t'core/html',\n\t\t\t\tgetBlockAttributes( 'core/html', node.outerHTML )\n\t\t\t);\n\t\t}\n\n\t\tconst { transform, blockName } = rawTransform;\n\n\t\tif ( transform ) {\n\t\t\treturn transform( node );\n\t\t}\n\n\t\treturn createBlock(\n\t\t\tblockName,\n\t\t\tgetBlockAttributes( blockName, node.outerHTML )\n\t\t);\n\t} );\n}\n"]}