{"version":3,"sources":["@wordpress/components/src/mobile/gradient/index.native.js"],"names":["getGradientAngle","gradientValue","angleBase","matchAngle","angle","exec","angleType","includes","parseFloat","getGradientColorGroup","colorNeedParenthesis","excludeSideOrCorner","modifiedGradientValue","replace","concat","gradientParser","parse","map","gradient","colorStops","color","index","type","value","length","fallbackLength","colorLength","join","getGradientBaseColors","colorGroup","getColorLocations","location","Number","Gradient","style","angleCenter","x","y","children","otherProps","resizeObserver","sizes","width","height","isGradient","getGradientType","gradients","colorsUtils","locations","colors","isLinearGradient","linear","styles","overflow","radialGradientContent","Platform","OS","group"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Platform } from 'react-native';\nimport RNLinearGradient from 'react-native-linear-gradient';\nimport gradientParser from 'gradient-parser';\n/**\n * WordPress dependencies\n */\nimport { colorsUtils } from '@wordpress/components';\nimport { RadialGradient, Stop, SVG, Defs, Rect } from '@wordpress/primitives';\nimport { useResizeObserver } from '@wordpress/compose';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nexport function getGradientAngle( gradientValue ) {\n\tconst angleBase = 45;\n\tconst matchAngle = /\\(((\\d+deg)|(to\\s[^,]+))/;\n\tconst angle = matchAngle.exec( gradientValue )\n\t\t? matchAngle.exec( gradientValue )[ 1 ]\n\t\t: '180deg';\n\n\tconst angleType = angle.includes( 'deg' ) ? 'angle' : 'sideOrCorner';\n\n\tif ( angleType === 'sideOrCorner' ) {\n\t\tswitch ( angle ) {\n\t\t\tcase 'to top':\n\t\t\t\treturn 0;\n\t\t\tcase 'to top right':\n\t\t\tcase 'to right top':\n\t\t\t\treturn angleBase;\n\t\t\tcase 'to right':\n\t\t\t\treturn 2 * angleBase;\n\t\t\tcase 'to bottom right':\n\t\t\tcase 'to right bottom':\n\t\t\t\treturn 3 * angleBase;\n\t\t\tcase 'to bottom':\n\t\t\t\treturn 4 * angleBase;\n\t\t\tcase 'to bottom left':\n\t\t\tcase 'to left bottom':\n\t\t\t\treturn 5 * angleBase;\n\t\t\tcase 'to left':\n\t\t\t\treturn 6 * angleBase;\n\t\t\tcase 'to top left':\n\t\t\tcase 'to left top':\n\t\t\t\treturn 7 * angleBase;\n\t\t}\n\t} else if ( angleType === 'angle' ) {\n\t\treturn parseFloat( angle );\n\t} else return 4 * angleBase;\n}\n\nexport function getGradientColorGroup( gradientValue ) {\n\tconst colorNeedParenthesis = [ 'rgb', 'rgba' ];\n\n\tconst excludeSideOrCorner = /linear-gradient\\(to\\s+([a-z\\s]+,)/;\n\n\t// Parser has some difficulties with angle defined as a side or corner (e.g. `to left`)\n\t// so it's going to be excluded in order to matching color groups\n\tconst modifiedGradientValue = gradientValue.replace(\n\t\texcludeSideOrCorner,\n\t\t'linear-gradient('\n\t);\n\n\treturn [].concat(\n\t\t...gradientParser.parse( modifiedGradientValue )?.map( ( gradient ) =>\n\t\t\tgradient.colorStops?.map( ( color, index ) => {\n\t\t\t\tconst { type, value, length } = color;\n\t\t\t\tconst fallbackLength = `${\n\t\t\t\t\t100 * ( index / ( gradient.colorStops.length - 1 ) )\n\t\t\t\t}%`;\n\t\t\t\tconst colorLength = length\n\t\t\t\t\t? `${ length.value }${ length.type }`\n\t\t\t\t\t: fallbackLength;\n\n\t\t\t\tif ( colorNeedParenthesis.includes( type ) ) {\n\t\t\t\t\treturn [ `${ type }(${ value.join( ',' ) })`, colorLength ];\n\t\t\t\t} else if ( type === 'literal' ) {\n\t\t\t\t\treturn [ value, colorLength ];\n\t\t\t\t}\n\t\t\t\treturn [ `#${ value }`, colorLength ];\n\t\t\t} )\n\t\t)\n\t);\n}\n\nexport function getGradientBaseColors( colorGroup ) {\n\treturn colorGroup.map( ( color ) => color[ 0 ] );\n}\n\nexport function getColorLocations( colorGroup ) {\n\treturn colorGroup.map(\n\t\t( location ) => Number( location[ 1 ].replace( '%', '' ) ) / 100\n\t);\n}\n\nfunction Gradient( {\n\tgradientValue,\n\tstyle,\n\tangleCenter = { x: 0.5, y: 0.5 },\n\tchildren,\n\t...otherProps\n} ) {\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\n\tconst { width = 0, height = 0 } = sizes || {};\n\tconst { isGradient, getGradientType, gradients } = colorsUtils;\n\n\tconst colorGroup = useMemo( () => getGradientColorGroup( gradientValue ), [\n\t\tgradientValue,\n\t] );\n\n\tconst locations = useMemo( () => getColorLocations( colorGroup ), [\n\t\tcolorGroup,\n\t] );\n\n\tconst colors = useMemo( () => getGradientBaseColors( colorGroup ), [\n\t\tcolorGroup,\n\t] );\n\n\tif ( ! gradientValue || ! isGradient( gradientValue ) ) {\n\t\treturn null;\n\t}\n\n\tconst isLinearGradient =\n\t\tgetGradientType( gradientValue ) === gradients.linear;\n\n\tif ( isLinearGradient ) {\n\t\treturn (\n\t\t\t<RNLinearGradient\n\t\t\t\tcolors={ colors }\n\t\t\t\tuseAngle={ true }\n\t\t\t\tangle={ getGradientAngle( gradientValue ) }\n\t\t\t\tlocations={ locations }\n\t\t\t\tangleCenter={ angleCenter }\n\t\t\t\tstyle={ style }\n\t\t\t\t{ ...otherProps }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</RNLinearGradient>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View style={ [ style, styles.overflow ] }>\n\t\t\t<View style={ styles.radialGradientContent }>{ children }</View>\n\t\t\t{ resizeObserver }\n\t\t\t<SVG>\n\t\t\t\t<Defs>\n\t\t\t\t\t<RadialGradient\n\t\t\t\t\t\t//eslint-disable-next-line no-restricted-syntax\n\t\t\t\t\t\tid=\"radialGradient\"\n\t\t\t\t\t\tgradientUnits=\"userSpaceOnUse\"\n\t\t\t\t\t\trx=\"70%\"\n\t\t\t\t\t\try=\"70%\"\n\t\t\t\t\t\tcy={ Platform.OS === 'android' ? width / 2 : '50%' }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ colorGroup.map( ( group ) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Stop\n\t\t\t\t\t\t\t\t\toffset={ group[ 1 ] }\n\t\t\t\t\t\t\t\t\tstopColor={ group[ 0 ] }\n\t\t\t\t\t\t\t\t\tstopOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tkey={ `${ group[ 1 ] }-${ group[ 0 ] }` }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</RadialGradient>\n\t\t\t\t</Defs>\n\t\t\t\t<Rect\n\t\t\t\t\theight={ height }\n\t\t\t\t\twidth={ width }\n\t\t\t\t\tfill=\"url(#radialGradient)\"\n\t\t\t\t/>\n\t\t\t</SVG>\n\t\t</View>\n\t);\n}\n\nexport default Gradient;\n"]}