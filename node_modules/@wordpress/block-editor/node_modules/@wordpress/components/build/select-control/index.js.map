{"version":3,"sources":["@wordpress/components/src/select-control/index.tsx"],"names":["useUniqueId","idProp","instanceId","SelectControl","id","className","disabled","help","hideLabelFromVision","label","multiple","onBlur","noop","onChange","onFocus","options","size","value","valueProp","labelPosition","prefix","suffix","props","ref","isFocused","setIsFocused","helpId","undefined","handleOnBlur","event","handleOnFocus","handleOnChange","selectedOptions","Array","from","target","filter","selected","newValues","map","classes","chevronDown","option","index","key","ForwardedComponent"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isEmpty, noop } from 'lodash';\nimport classNames from 'classnames';\n// eslint-disable-next-line no-restricted-imports\nimport type { ChangeEvent, FocusEvent, Ref } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { useState, forwardRef } from '@wordpress/element';\nimport { Icon, chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BaseControl from '../base-control';\nimport InputBase from '../input-control/input-base';\nimport type { InputBaseProps, LabelPosition } from '../input-control/types';\nimport { Select, DownArrowWrapper } from './styles/select-control-styles';\nimport type { Size } from './types';\nimport type { PolymorphicComponentProps } from '../ui/context';\n\nfunction useUniqueId( idProp?: string ) {\n\tconst instanceId = useInstanceId( SelectControl );\n\tconst id = `inspector-select-control-${ instanceId }`;\n\n\treturn idProp || id;\n}\n\nexport interface SelectControlProps\n\textends Omit< InputBaseProps, 'children' | 'isFocused' > {\n\thelp?: string;\n\thideLabelFromVision?: boolean;\n\tmultiple?: boolean;\n\tonBlur?: ( event: FocusEvent< HTMLSelectElement > ) => void;\n\tonFocus?: ( event: FocusEvent< HTMLSelectElement > ) => void;\n\tonChange?: (\n\t\tvalue: string | string[],\n\t\textra?: { event?: ChangeEvent< HTMLSelectElement > }\n\t) => void;\n\toptions?: {\n\t\tlabel: string;\n\t\tvalue: string;\n\t\tid?: string;\n\t\tdisabled?: boolean;\n\t}[];\n\tsize?: Size;\n\tvalue?: string | string[];\n\tlabelPosition?: LabelPosition;\n}\n\nfunction SelectControl(\n\t{\n\t\tclassName,\n\t\tdisabled = false,\n\t\thelp,\n\t\thideLabelFromVision,\n\t\tid: idProp,\n\t\tlabel,\n\t\tmultiple = false,\n\t\tonBlur = noop,\n\t\tonChange = noop,\n\t\tonFocus = noop,\n\t\toptions = [],\n\t\tsize = 'default',\n\t\tvalue: valueProp,\n\t\tlabelPosition = 'top',\n\t\tprefix,\n\t\tsuffix,\n\t\t...props\n\t}: PolymorphicComponentProps< SelectControlProps, 'select', false >,\n\tref: Ref< HTMLSelectElement >\n) {\n\tconst [ isFocused, setIsFocused ] = useState( false );\n\tconst id = useUniqueId( idProp );\n\tconst helpId = help ? `${ id }__help` : undefined;\n\n\t// Disable reason: A select with an onchange throws a warning\n\tif ( isEmpty( options ) ) return null;\n\n\tconst handleOnBlur = ( event: FocusEvent< HTMLSelectElement > ) => {\n\t\tonBlur( event );\n\t\tsetIsFocused( false );\n\t};\n\n\tconst handleOnFocus = ( event: FocusEvent< HTMLSelectElement > ) => {\n\t\tonFocus( event );\n\t\tsetIsFocused( true );\n\t};\n\n\tconst handleOnChange = ( event: ChangeEvent< HTMLSelectElement > ) => {\n\t\tif ( multiple ) {\n\t\t\tconst selectedOptions = Array.from( event.target.options ).filter(\n\t\t\t\t( { selected } ) => selected\n\t\t\t);\n\t\t\tconst newValues = selectedOptions.map( ( { value } ) => value );\n\t\t\tonChange( newValues );\n\t\t\treturn;\n\t\t}\n\n\t\tonChange( event.target.value, { event } );\n\t};\n\n\tconst classes = classNames( 'components-select-control', className );\n\n\t/* eslint-disable jsx-a11y/no-onchange */\n\treturn (\n\t\t<BaseControl help={ help } id={ id }>\n\t\t\t<InputBase\n\t\t\t\tclassName={ classes }\n\t\t\t\tdisabled={ disabled }\n\t\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t\t\tid={ id }\n\t\t\t\tisFocused={ isFocused }\n\t\t\t\tlabel={ label }\n\t\t\t\tsize={ size }\n\t\t\t\tsuffix={\n\t\t\t\t\tsuffix || (\n\t\t\t\t\t\t<DownArrowWrapper>\n\t\t\t\t\t\t\t<Icon icon={ chevronDown } size={ 18 } />\n\t\t\t\t\t\t</DownArrowWrapper>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tprefix={ prefix }\n\t\t\t\tlabelPosition={ labelPosition }\n\t\t\t>\n\t\t\t\t<Select\n\t\t\t\t\t{ ...props }\n\t\t\t\t\taria-describedby={ helpId }\n\t\t\t\t\tclassName=\"components-select-control__input\"\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\tid={ id }\n\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\tonBlur={ handleOnBlur }\n\t\t\t\t\tonChange={ handleOnChange }\n\t\t\t\t\tonFocus={ handleOnFocus }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tselectSize={ size }\n\t\t\t\t\tvalue={ valueProp }\n\t\t\t\t>\n\t\t\t\t\t{ options.map( ( option, index ) => {\n\t\t\t\t\t\tconst key =\n\t\t\t\t\t\t\toption.id ||\n\t\t\t\t\t\t\t`${ option.label }-${ option.value }-${ index }`;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t\t\tvalue={ option.value }\n\t\t\t\t\t\t\t\tdisabled={ option.disabled }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ option.label }\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</Select>\n\t\t\t</InputBase>\n\t\t</BaseControl>\n\t);\n\t/* eslint-enable jsx-a11y/no-onchange */\n}\n\nconst ForwardedComponent = forwardRef( SelectControl );\n\nexport default ForwardedComponent;\n"]}