{"version":3,"sources":["@wordpress/components/src/navigation/use-create-navigation-tree.js"],"names":["useCreateNavigationTree","nodes","items","getNode","getItem","addNode","addItem","removeNode","removeItem","menus","getMenu","addMenu","removeMenu","childMenu","setChildMenu","getChildMenu","menu","traverseMenu","startMenu","callback","visited","queue","current","length","shift","includes","push","isMenuEmpty","menuToCheck","isEmpty","key","value","state","newState","parentMenu"],"mappings":";;;;;;;AAGA;;AAKA;;AARA;AACA;AACA;;AAGA;AACA;AACA;AAGO,MAAMA,uBAAuB,GAAG,MAAM;AAC5C,QAAM;AACLC,IAAAA,KAAK,EAAEC,KADF;AAELC,IAAAA,OAAO,EAAEC,OAFJ;AAGLC,IAAAA,OAAO,EAAEC,OAHJ;AAILC,IAAAA,UAAU,EAAEC;AAJP,MAKF,qDALJ;AAOA,QAAM;AACLP,IAAAA,KAAK,EAAEQ,KADF;AAELN,IAAAA,OAAO,EAAEO,OAFJ;AAGLL,IAAAA,OAAO,EAAEM,OAHJ;AAILJ,IAAAA,UAAU,EAAEK;AAJP,MAKF,qDALJ;AAOA;AACD;AACA;AACA;AACA;AACA;AACA;;AACC,QAAM,CAAEC,SAAF,EAAaC,YAAb,IAA8B,uBAAU,EAAV,CAApC;;AACA,QAAMC,YAAY,GAAKC,IAAF,IAAYH,SAAS,CAAEG,IAAF,CAAT,IAAqB,EAAtD;;AAEA,QAAMC,YAAY,GAAG,CAAEC,SAAF,EAAaC,QAAb,KAA2B;AAC/C,UAAMC,OAAO,GAAG,EAAhB;AACA,QAAIC,KAAK,GAAG,CAAEH,SAAF,CAAZ;AACA,QAAII,OAAJ;;AAEA,WAAQD,KAAK,CAACE,MAAN,GAAe,CAAvB,EAA2B;AAC1BD,MAAAA,OAAO,GAAGZ,OAAO,CAAEW,KAAK,CAACG,KAAN,EAAF,CAAjB;;AAEA,UAAK,CAAEF,OAAF,IAAaF,OAAO,CAACK,QAAR,CAAkBH,OAAO,CAACN,IAA1B,CAAlB,EAAqD;AACpD;AACA;;AAEDI,MAAAA,OAAO,CAACM,IAAR,CAAcJ,OAAO,CAACN,IAAtB;AACAK,MAAAA,KAAK,GAAG,CAAE,GAAGA,KAAL,EAAY,GAAGN,YAAY,CAAEO,OAAO,CAACN,IAAV,CAA3B,CAAR;;AAEA,UAAKG,QAAQ,CAAEG,OAAF,CAAR,KAAwB,KAA7B,EAAqC;AACpC;AACA;AACD;AACD,GAnBD;;AAqBA,QAAMK,WAAW,GAAKC,WAAF,IAAmB;AACtC,QAAIC,OAAO,GAAG,IAAd;AAEAZ,IAAAA,YAAY,CAAEW,WAAF,EAAiBN,OAAF,IAAe;AACzC,UAAK,CAAEA,OAAO,CAACO,OAAf,EAAyB;AACxBA,QAAAA,OAAO,GAAG,KAAV;AACA,eAAO,KAAP;AACA;AACD,KALW,CAAZ;AAOA,WAAOA,OAAP;AACA,GAXD;;AAaA,SAAO;AACN3B,IAAAA,KADM;AAENE,IAAAA,OAFM;AAGNE,IAAAA,OAHM;AAINE,IAAAA,UAJM;AAMNC,IAAAA,KANM;AAONC,IAAAA,OAPM;AAQNC,IAAAA,OAAO,EAAE,CAAEmB,GAAF,EAAOC,KAAP,KAAkB;AAC1BjB,MAAAA,YAAY,CAAIkB,KAAF,IAAa;AAC1B,cAAMC,QAAQ,GAAG,EAAE,GAAGD;AAAL,SAAjB;;AAEA,YAAK,CAAEC,QAAQ,CAAEF,KAAK,CAACG,UAAR,CAAf,EAAsC;AACrCD,UAAAA,QAAQ,CAAEF,KAAK,CAACG,UAAR,CAAR,GAA+B,EAA/B;AACA;;AAEDD,QAAAA,QAAQ,CAAEF,KAAK,CAACG,UAAR,CAAR,CAA6BR,IAA7B,CAAmCI,GAAnC;AAEA,eAAOG,QAAP;AACA,OAVW,CAAZ;AAYAtB,MAAAA,OAAO,CAAEmB,GAAF,EAAOC,KAAP,CAAP;AACA,KAtBK;AAuBNnB,IAAAA,UAvBM;AAwBNC,IAAAA,SAxBM;AAyBNI,IAAAA,YAzBM;AA0BNU,IAAAA;AA1BM,GAAP;AA4BA,CAvFM","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useNavigationTreeNodes } from './use-navigation-tree-nodes';\n\nexport const useCreateNavigationTree = () => {\n\tconst {\n\t\tnodes: items,\n\t\tgetNode: getItem,\n\t\taddNode: addItem,\n\t\tremoveNode: removeItem,\n\t} = useNavigationTreeNodes();\n\n\tconst {\n\t\tnodes: menus,\n\t\tgetNode: getMenu,\n\t\taddNode: addMenu,\n\t\tremoveNode: removeMenu,\n\t} = useNavigationTreeNodes();\n\n\t/**\n\t * Stores direct nested menus of menus\n\t * This makes it easy to traverse menu tree\n\t *\n\t * Key is the menu prop of the menu\n\t * Value is an array of menu keys\n\t */\n\tconst [ childMenu, setChildMenu ] = useState( {} );\n\tconst getChildMenu = ( menu ) => childMenu[ menu ] || [];\n\n\tconst traverseMenu = ( startMenu, callback ) => {\n\t\tconst visited = [];\n\t\tlet queue = [ startMenu ];\n\t\tlet current;\n\n\t\twhile ( queue.length > 0 ) {\n\t\t\tcurrent = getMenu( queue.shift() );\n\n\t\t\tif ( ! current || visited.includes( current.menu ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvisited.push( current.menu );\n\t\t\tqueue = [ ...queue, ...getChildMenu( current.menu ) ];\n\n\t\t\tif ( callback( current ) === false ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst isMenuEmpty = ( menuToCheck ) => {\n\t\tlet isEmpty = true;\n\n\t\ttraverseMenu( menuToCheck, ( current ) => {\n\t\t\tif ( ! current.isEmpty ) {\n\t\t\t\tisEmpty = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\treturn isEmpty;\n\t};\n\n\treturn {\n\t\titems,\n\t\tgetItem,\n\t\taddItem,\n\t\tremoveItem,\n\n\t\tmenus,\n\t\tgetMenu,\n\t\taddMenu: ( key, value ) => {\n\t\t\tsetChildMenu( ( state ) => {\n\t\t\t\tconst newState = { ...state };\n\n\t\t\t\tif ( ! newState[ value.parentMenu ] ) {\n\t\t\t\t\tnewState[ value.parentMenu ] = [];\n\t\t\t\t}\n\n\t\t\t\tnewState[ value.parentMenu ].push( key );\n\n\t\t\t\treturn newState;\n\t\t\t} );\n\n\t\t\taddMenu( key, value );\n\t\t},\n\t\tremoveMenu,\n\t\tchildMenu,\n\t\ttraverseMenu,\n\t\tisMenuEmpty,\n\t};\n};\n"]}