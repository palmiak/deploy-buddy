{"version":3,"sources":["@wordpress/components/src/color-picker/index.js"],"names":["classnames","debounce","noop","partial","Component","Alpha","Hue","Inputs","Saturation","colorToState","simpleCheckForValidColor","isValidHex","toLowerCase","value","String","isValueEmpty","data","source","hex","undefined","h","s","l","r","g","b","v","a","isValidColor","colors","dataToColors","oldColors","valueKey","ColorPicker","constructor","color","arguments","state","draftHex","draftRgb","rgb","draftHsl","hsl","commitValues","bind","setDraftValues","resetDraftValues","handleInputChange","oldHue","onChangeComplete","props","setState","render","className","disableAlpha","hsv","classes","backgroundColor","toRgbString"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAOA,UAAP,MAAuB,YAAvB;AACA,SAASC,QAAT,EAAmBC,IAAnB,EAAyBC,OAAzB,QAAwC,QAAxC;AAEA;AACA;AACA;;AACA,SAASC,SAAT,QAA0B,oBAA1B;AAEA;AACA;AACA;;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,YAAT,EAAuBC,wBAAvB,EAAiDC,UAAjD,QAAmE,SAAnE;;AAEA,MAAMC,WAAW,GAAKC,KAAF,IAAaC,MAAM,CAAED,KAAF,CAAN,CAAgBD,WAAhB,EAAjC;;AACA,MAAMG,YAAY,GAAKC,IAAF,IAAY;AAChC,MAAKA,IAAI,CAACC,MAAL,KAAgB,KAAhB,IAAyBD,IAAI,CAACE,GAAL,KAAaC,SAA3C,EAAuD;AACtD,WAAO,IAAP;AACA;;AAED,MACCH,IAAI,CAACC,MAAL,KAAgB,KAAhB,KACED,IAAI,CAACI,CAAL,KAAWD,SAAX,IAAwBH,IAAI,CAACK,CAAL,KAAWF,SAAnC,IAAgDH,IAAI,CAACM,CAAL,KAAWH,SAD7D,CADD,EAGE;AACD,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACC,SACCH,IAAI,CAACC,MAAL,KAAgB,KAAhB,KACED,IAAI,CAACO,CAAL,KAAWJ,SAAX,IACDH,IAAI,CAACQ,CAAL,KAAWL,SADV,IAEDH,IAAI,CAACS,CAAL,KAAWN,SAHZ,MAIEH,IAAI,CAACI,CAAL,KAAWD,SAAX,IACDH,IAAI,CAACK,CAAL,KAAWF,SADV,IAEDH,IAAI,CAACU,CAAL,KAAWP,SAFV,IAGDH,IAAI,CAACW,CAAL,KAAWR,SAPZ,MAQEH,IAAI,CAACI,CAAL,KAAWD,SAAX,IACDH,IAAI,CAACK,CAAL,KAAWF,SADV,IAEDH,IAAI,CAACM,CAAL,KAAWH,SAFV,IAGDH,IAAI,CAACW,CAAL,KAAWR,SAXZ,CADD;AAcA,CAnCD;;AAqCA,MAAMS,YAAY,GAAKC,MAAF,IACpBA,MAAM,CAACX,GAAP,GAAaP,UAAU,CAAEkB,MAAM,CAACX,GAAT,CAAvB,GAAwCR,wBAAwB,CAAEmB,MAAF,CADjE;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,YAAY,GAAG,CAAEC,SAAF,EAAa;AAAEd,EAAAA,MAAF;AAAUe,EAAAA,QAAV;AAAoBnB,EAAAA;AAApB,CAAb,KAA8C;AAClE,MAAKI,MAAM,KAAK,KAAhB,EAAwB;AACvB,WAAO;AACNA,MAAAA,MADM;AAEN,OAAEA,MAAF,GAAYJ;AAFN,KAAP;AAIA;;AACD,SAAO;AACNI,IAAAA,MADM;AAEN,OAAG,EAAE,GAAGc,SAAS,CAAEd,MAAF,CAAd;AAA0B,SAAG;AAAE,SAAEe,QAAF,GAAcnB;AAAhB;AAA7B;AAFG,GAAP;AAIA,CAXD;;AAaA,eAAe,MAAMoB,WAAN,SAA0B7B,SAA1B,CAAoC;AAClD8B,EAAAA,WAAW,CAAE;AAAEC,IAAAA,KAAK,GAAG;AAAV,GAAF,EAAyB;AACnC,UAAO,GAAGC,SAAV;AACA,UAAMP,MAAM,GAAGpB,YAAY,CAAE0B,KAAF,CAA3B;AACA,SAAKE,KAAL,GAAa,EACZ,GAAGR,MADS;AAEZS,MAAAA,QAAQ,EAAE1B,WAAW,CAAEiB,MAAM,CAACX,GAAT,CAFT;AAGZqB,MAAAA,QAAQ,EAAEV,MAAM,CAACW,GAHL;AAIZC,MAAAA,QAAQ,EAAEZ,MAAM,CAACa;AAJL,KAAb;AAMA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAwB,IAAxB,CAApB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAA0B,IAA1B,CAAtB;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA4B,IAA5B,CAAxB;AACA,SAAKG,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBH,IAAvB,CAA6B,IAA7B,CAAzB;AACA;;AAEDD,EAAAA,YAAY,CAAE3B,IAAF,EAAS;AACpB,UAAM;AAAEgC,MAAAA,MAAF;AAAUC,MAAAA,gBAAgB,GAAG/C;AAA7B,QAAsC,KAAKgD,KAAjD;;AAEA,QAAKtB,YAAY,CAAEZ,IAAF,CAAjB,EAA4B;AAC3B,YAAMa,MAAM,GAAGpB,YAAY,CAAEO,IAAF,EAAQA,IAAI,CAACI,CAAL,IAAU4B,MAAlB,CAA3B;AACA,WAAKG,QAAL,CACC,EACC,GAAGtB,MADJ;AAECS,QAAAA,QAAQ,EAAE1B,WAAW,CAAEiB,MAAM,CAACX,GAAT,CAFtB;AAGCuB,QAAAA,QAAQ,EAAEZ,MAAM,CAACa,GAHlB;AAICH,QAAAA,QAAQ,EAAEV,MAAM,CAACW;AAJlB,OADD,EAOCvC,QAAQ,CAAEE,OAAO,CAAE8C,gBAAF,EAAoBpB,MAApB,CAAT,EAAuC,GAAvC,CAPT;AASA;AACD;;AAEDiB,EAAAA,gBAAgB,GAAG;AAClB,SAAKK,QAAL,CAAe;AACdb,MAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWnB,GADP;AAEduB,MAAAA,QAAQ,EAAE,KAAKJ,KAAL,CAAWK,GAFP;AAGdH,MAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWG;AAHP,KAAf;AAKA;;AAEDK,EAAAA,cAAc,CAAE7B,IAAF,EAAS;AACtB,YAASA,IAAI,CAACC,MAAd;AACC,WAAK,KAAL;AACC,aAAKkC,QAAL,CAAe;AAAEb,UAAAA,QAAQ,EAAE1B,WAAW,CAAEI,IAAI,CAACE,GAAP;AAAvB,SAAf;AACA;;AACD,WAAK,KAAL;AACC,aAAKiC,QAAL,CAAe;AAAEZ,UAAAA,QAAQ,EAAEvB;AAAZ,SAAf;AACA;;AACD,WAAK,KAAL;AACC,aAAKmC,QAAL,CAAe;AAAEV,UAAAA,QAAQ,EAAEzB;AAAZ,SAAf;AACA;AATF;AAWA;;AAED+B,EAAAA,iBAAiB,CAAE/B,IAAF,EAAS;AACzB,YAASA,IAAI,CAACqB,KAAd;AACC,WAAK,OAAL;AACC,aAAKS,gBAAL;AACA;;AACD,WAAK,QAAL;AACC,cAAMjB,MAAM,GAAGC,YAAY,CAAE,KAAKO,KAAP,EAAcrB,IAAd,CAA3B;;AACA,YAAK,CAAED,YAAY,CAAEc,MAAF,CAAnB,EAAgC;AAC/B,eAAKc,YAAL,CAAmBd,MAAnB;AACA;;AACD;;AACD,WAAK,OAAL;AACC,aAAKgB,cAAL,CAAqBf,YAAY,CAAE,KAAKO,KAAP,EAAcrB,IAAd,CAAjC;AACA;AAZF;AAcA;;AAEDoC,EAAAA,MAAM,GAAG;AACR,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAA8B,KAAKJ,KAAzC;AACA,UAAM;AACLf,MAAAA,KADK;AAELO,MAAAA,GAFK;AAGLa,MAAAA,GAHK;AAILf,MAAAA,GAJK;AAKLF,MAAAA,QALK;AAMLG,MAAAA,QANK;AAOLF,MAAAA;AAPK,QAQF,KAAKF,KART;AASA,UAAMmB,OAAO,GAAGxD,UAAU,CAAEqD,SAAF,EAAa;AACtC,iCAA2B,IADW;AAEtC,2BAAqBC,YAFiB;AAGtC,0BAAoB,CAAEA;AAHgB,KAAb,CAA1B;AAMA,WACC;AAAK,MAAA,SAAS,EAAGE;AAAjB,OACC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC,cAAC,UAAD;AACC,MAAA,GAAG,EAAGd,GADP;AAEC,MAAA,GAAG,EAAGa,GAFP;AAGC,MAAA,QAAQ,EAAG,KAAKZ;AAHjB,MADD,CADD,EASC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC;AACC,MAAA,SAAS,EAAC,iCADX;AAEC,MAAA,KAAK,EAAG;AACPc,QAAAA,eAAe,EACdtB,KAAK,IAAIA,KAAK,CAACuB,WAAN;AAFH;AAFT,MADD,CADD,EAWC;AAAK,MAAA,SAAS,EAAC;AAAf,OACC,cAAC,GAAD;AAAK,MAAA,GAAG,EAAGhB,GAAX;AAAiB,MAAA,QAAQ,EAAG,KAAKC;AAAjC,MADD,EAEGW,YAAY,GAAG,IAAH,GACb,cAAC,KAAD;AACC,MAAA,GAAG,EAAGd,GADP;AAEC,MAAA,GAAG,EAAGE,GAFP;AAGC,MAAA,QAAQ,EAAG,KAAKC;AAHjB,MAHF,CAXD,CADD,EAwBC,cAAC,MAAD;AACC,MAAA,GAAG,EAAGJ,QADP;AAEC,MAAA,GAAG,EAAGE,QAFP;AAGC,MAAA,GAAG,EAAGH,QAHP;AAIC,MAAA,QAAQ,EAAG,KAAKS,iBAJjB;AAKC,MAAA,YAAY,EAAGO;AALhB,MAxBD,CATD,CADD;AA4CA;;AArIiD","sourcesContent":["/**\n * Parts of this source were derived and modified from react-color,\n * released under the MIT license.\n *\n * https://github.com/casesandberg/react-color/\n *\n * Copyright (c) 2015 Case Sandberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { debounce, noop, partial } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Alpha from './alpha';\nimport Hue from './hue';\nimport Inputs from './inputs';\nimport Saturation from './saturation';\nimport { colorToState, simpleCheckForValidColor, isValidHex } from './utils';\n\nconst toLowerCase = ( value ) => String( value ).toLowerCase();\nconst isValueEmpty = ( data ) => {\n\tif ( data.source === 'hex' && data.hex === undefined ) {\n\t\treturn true;\n\t}\n\n\tif (\n\t\tdata.source === 'hsl' &&\n\t\t( data.h === undefined || data.s === undefined || data.l === undefined )\n\t) {\n\t\treturn true;\n\t}\n\n\t/**\n\t * Check that if source is `rgb`:\n\t * `r`, `g` or `b` properties are not undefined\n\t * OR (||) `h`, `s`, `v` or `a` properties are not undefined\n\t * OR (||) `h`, `s`, `l` or `a` properties are not undefined\n\t *\n\t * before it was checking with NOT(!) statement witch for `0` (bool|int) values returns `true`\n\t * this is a typecasting issue only visible for hex values that derive from #000000\n\t */\n\treturn (\n\t\tdata.source === 'rgb' &&\n\t\t( data.r === undefined ||\n\t\t\tdata.g === undefined ||\n\t\t\tdata.b === undefined ) &&\n\t\t( data.h === undefined ||\n\t\t\tdata.s === undefined ||\n\t\t\tdata.v === undefined ||\n\t\t\tdata.a === undefined ) &&\n\t\t( data.h === undefined ||\n\t\t\tdata.s === undefined ||\n\t\t\tdata.l === undefined ||\n\t\t\tdata.a === undefined )\n\t);\n};\n\nconst isValidColor = ( colors ) =>\n\tcolors.hex ? isValidHex( colors.hex ) : simpleCheckForValidColor( colors );\n\n/**\n * Function that creates the new color object\n * from old data and the new value.\n *\n * @param {Object}        oldColors          The old color object.\n * @param {string}        oldColors.hex\n * @param {Object}        oldColors.rgb\n * @param {number}        oldColors.rgb.r\n * @param {number}        oldColors.rgb.g\n * @param {number}        oldColors.rgb.b\n * @param {number}        oldColors.rgb.a\n * @param {Object}        oldColors.hsl\n * @param {number}        oldColors.hsl.h\n * @param {number}        oldColors.hsl.s\n * @param {number}        oldColors.hsl.l\n * @param {number}        oldColors.hsl.a\n * @param {string}        oldColors.draftHex Same format as oldColors.hex\n * @param {Object}        oldColors.draftRgb Same format as oldColors.rgb\n * @param {Object}        oldColors.draftHsl Same format as oldColors.hsl\n * @param {Object}        data               Data containing the new value to update.\n * @param {Object}        data.source        One of `hex`, `rgb`, `hsl`.\n * @param {string|number} data.value         Value to update.\n * @param {string}        data.valueKey      Depends on `data.source` values:\n *                                           - when source = `rgb`, valuKey can be `r`, `g`, `b`, or `a`.\n *                                           - when source = `hsl`, valuKey can be `h`, `s`, `l`, or `a`.\n * @return {Object} A new color object for a specific source. For example:\n * { source: 'rgb', r: 1, g: 2, b:3, a:0 }\n */\nconst dataToColors = ( oldColors, { source, valueKey, value } ) => {\n\tif ( source === 'hex' ) {\n\t\treturn {\n\t\t\tsource,\n\t\t\t[ source ]: value,\n\t\t};\n\t}\n\treturn {\n\t\tsource,\n\t\t...{ ...oldColors[ source ], ...{ [ valueKey ]: value } },\n\t};\n};\n\nexport default class ColorPicker extends Component {\n\tconstructor( { color = '0071a1' } ) {\n\t\tsuper( ...arguments );\n\t\tconst colors = colorToState( color );\n\t\tthis.state = {\n\t\t\t...colors,\n\t\t\tdraftHex: toLowerCase( colors.hex ),\n\t\t\tdraftRgb: colors.rgb,\n\t\t\tdraftHsl: colors.hsl,\n\t\t};\n\t\tthis.commitValues = this.commitValues.bind( this );\n\t\tthis.setDraftValues = this.setDraftValues.bind( this );\n\t\tthis.resetDraftValues = this.resetDraftValues.bind( this );\n\t\tthis.handleInputChange = this.handleInputChange.bind( this );\n\t}\n\n\tcommitValues( data ) {\n\t\tconst { oldHue, onChangeComplete = noop } = this.props;\n\n\t\tif ( isValidColor( data ) ) {\n\t\t\tconst colors = colorToState( data, data.h || oldHue );\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\t...colors,\n\t\t\t\t\tdraftHex: toLowerCase( colors.hex ),\n\t\t\t\t\tdraftHsl: colors.hsl,\n\t\t\t\t\tdraftRgb: colors.rgb,\n\t\t\t\t},\n\t\t\t\tdebounce( partial( onChangeComplete, colors ), 100 )\n\t\t\t);\n\t\t}\n\t}\n\n\tresetDraftValues() {\n\t\tthis.setState( {\n\t\t\tdraftHex: this.state.hex,\n\t\t\tdraftHsl: this.state.hsl,\n\t\t\tdraftRgb: this.state.rgb,\n\t\t} );\n\t}\n\n\tsetDraftValues( data ) {\n\t\tswitch ( data.source ) {\n\t\t\tcase 'hex':\n\t\t\t\tthis.setState( { draftHex: toLowerCase( data.hex ) } );\n\t\t\t\tbreak;\n\t\t\tcase 'rgb':\n\t\t\t\tthis.setState( { draftRgb: data } );\n\t\t\t\tbreak;\n\t\t\tcase 'hsl':\n\t\t\t\tthis.setState( { draftHsl: data } );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thandleInputChange( data ) {\n\t\tswitch ( data.state ) {\n\t\t\tcase 'reset':\n\t\t\t\tthis.resetDraftValues();\n\t\t\t\tbreak;\n\t\t\tcase 'commit':\n\t\t\t\tconst colors = dataToColors( this.state, data );\n\t\t\t\tif ( ! isValueEmpty( colors ) ) {\n\t\t\t\t\tthis.commitValues( colors );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'draft':\n\t\t\t\tthis.setDraftValues( dataToColors( this.state, data ) );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, disableAlpha } = this.props;\n\t\tconst {\n\t\t\tcolor,\n\t\t\thsl,\n\t\t\thsv,\n\t\t\trgb,\n\t\t\tdraftHex,\n\t\t\tdraftHsl,\n\t\t\tdraftRgb,\n\t\t} = this.state;\n\t\tconst classes = classnames( className, {\n\t\t\t'components-color-picker': true,\n\t\t\t'is-alpha-disabled': disableAlpha,\n\t\t\t'is-alpha-enabled': ! disableAlpha,\n\t\t} );\n\n\t\treturn (\n\t\t\t<div className={ classes }>\n\t\t\t\t<div className=\"components-color-picker__saturation\">\n\t\t\t\t\t<Saturation\n\t\t\t\t\t\thsl={ hsl }\n\t\t\t\t\t\thsv={ hsv }\n\t\t\t\t\t\tonChange={ this.commitValues }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"components-color-picker__body\">\n\t\t\t\t\t<div className=\"components-color-picker__controls\">\n\t\t\t\t\t\t<div className=\"components-color-picker__swatch\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"components-color-picker__active\"\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\tcolor && color.toRgbString(),\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"components-color-picker__toggles\">\n\t\t\t\t\t\t\t<Hue hsl={ hsl } onChange={ this.commitValues } />\n\t\t\t\t\t\t\t{ disableAlpha ? null : (\n\t\t\t\t\t\t\t\t<Alpha\n\t\t\t\t\t\t\t\t\trgb={ rgb }\n\t\t\t\t\t\t\t\t\thsl={ hsl }\n\t\t\t\t\t\t\t\t\tonChange={ this.commitValues }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Inputs\n\t\t\t\t\t\trgb={ draftRgb }\n\t\t\t\t\t\thsl={ draftHsl }\n\t\t\t\t\t\thex={ draftHex }\n\t\t\t\t\t\tonChange={ this.handleInputChange }\n\t\t\t\t\t\tdisableAlpha={ disableAlpha }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}