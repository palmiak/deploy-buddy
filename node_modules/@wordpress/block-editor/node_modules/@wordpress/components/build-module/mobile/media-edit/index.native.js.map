{"version":3,"sources":["@wordpress/components/src/mobile/media-edit/index.native.js"],"names":["compact","Component","__","Picker","requestMediaEditor","mediaSources","MEDIA_TYPE_IMAGE","MEDIA_EDITOR","editOption","id","value","label","requiresModal","types","replaceOption","deviceLibrary","MediaEdit","constructor","props","onPickerPresent","bind","onPickerSelect","getMediaOptionsItems","getDestructiveButtonIndex","pickerOptions","openReplaceMediaOptions","source","uri","options","destructiveButtonIndex","findIndex","option","destructiveButton","undefined","picker","presentPicker","onSelect","multiple","media","optionSelected","find","onPress","render","mediaOptions","instance","open"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Picker } from '@wordpress/components';\nimport {\n\trequestMediaEditor,\n\tmediaSources,\n} from '@wordpress/react-native-bridge';\n\nexport const MEDIA_TYPE_IMAGE = 'image';\n\nexport const MEDIA_EDITOR = 'MEDIA_EDITOR';\n\nconst editOption = {\n\tid: MEDIA_EDITOR,\n\tvalue: MEDIA_EDITOR,\n\tlabel: __( 'Edit' ),\n\trequiresModal: true,\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nconst replaceOption = {\n\tid: mediaSources.deviceLibrary,\n\tvalue: mediaSources.deviceLibrary,\n\tlabel: __( 'Replace' ),\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nexport class MediaEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\n\t\tthis.getMediaOptionsItems = this.getMediaOptionsItems.bind( this );\n\t\tthis.getDestructiveButtonIndex = this.getDestructiveButtonIndex.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\tgetMediaOptionsItems() {\n\t\tconst { pickerOptions, openReplaceMediaOptions, source } = this.props;\n\n\t\treturn compact( [\n\t\t\tsource?.uri && editOption,\n\t\t\topenReplaceMediaOptions && replaceOption,\n\t\t\t...( pickerOptions ? pickerOptions : [] ),\n\t\t] );\n\t}\n\n\tgetDestructiveButtonIndex() {\n\t\tconst options = this.getMediaOptionsItems();\n\t\tconst destructiveButtonIndex = options.findIndex(\n\t\t\t( option ) => option?.destructiveButton\n\t\t);\n\n\t\treturn destructiveButtonIndex !== -1\n\t\t\t? destructiveButtonIndex + 1\n\t\t\t: undefined;\n\t}\n\n\tonPickerPresent() {\n\t\tif ( this.picker ) {\n\t\t\tthis.picker.presentPicker();\n\t\t}\n\t}\n\n\tonPickerSelect( value ) {\n\t\tconst {\n\t\t\tonSelect,\n\t\t\tpickerOptions,\n\t\t\tmultiple = false,\n\t\t\topenReplaceMediaOptions,\n\t\t} = this.props;\n\n\t\tswitch ( value ) {\n\t\t\tcase MEDIA_EDITOR:\n\t\t\t\trequestMediaEditor( this.props.source.uri, ( media ) => {\n\t\t\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\n\t\t\t\t\t\tonSelect( media );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconst optionSelected =\n\t\t\t\t\tpickerOptions &&\n\t\t\t\t\tpickerOptions.find( ( option ) => option.id === value );\n\n\t\t\t\tif ( optionSelected && optionSelected.onPress ) {\n\t\t\t\t\toptionSelected.onPress();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( openReplaceMediaOptions ) {\n\t\t\t\t\topenReplaceMediaOptions();\n\t\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst mediaOptions = () => (\n\t\t\t<Picker\n\t\t\t\thideCancelButton\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\n\t\t\t\toptions={ this.getMediaOptionsItems() }\n\t\t\t\tleftAlign={ true }\n\t\t\t\tonChange={ this.onPickerSelect }\n\t\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\t\ttitle={ __( 'Media options' ) }\n\t\t\t\tdestructiveButtonIndex={ this.getDestructiveButtonIndex() }\n\t\t\t/>\n\t\t);\n\n\t\treturn this.props.render( {\n\t\t\topen: this.onPickerPresent,\n\t\t\tmediaOptions,\n\t\t} );\n\t}\n}\n\nexport default MediaEdit;\n"]}