{"version":3,"sources":["@wordpress/components/src/focusable-iframe/index.js"],"names":["useEffect","useRef","useMergeRefs","FocusableIframe","iframeRef","props","fallbackRef","ref","iframe","current","ownerDocument","defaultView","checkFocus","activeElement","focus","addEventListener","removeEventListener"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,oBAAlC;AACA,SAASC,YAAT,QAA6B,oBAA7B;AAEA,eAAe,SAASC,eAAT,CAA0B;AAAEC,EAAAA,SAAF;AAAa,KAAGC;AAAhB,CAA1B,EAAoD;AAClE,QAAMC,WAAW,GAAGL,MAAM,EAA1B;AACA,QAAMM,GAAG,GAAGL,YAAY,CAAE,CAAEE,SAAF,EAAaE,WAAb,CAAF,CAAxB;AAEAN,EAAAA,SAAS,CAAE,MAAM;AAChB,UAAMQ,MAAM,GAAGF,WAAW,CAACG,OAA3B;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAoBF,MAA1B;AACA,UAAM;AAAEG,MAAAA;AAAF,QAAkBD,aAAxB;AAEA;AACF;AACA;AACA;;AACE,aAASE,UAAT,GAAsB;AACrB,UAAKF,aAAa,CAACG,aAAd,KAAgCL,MAArC,EAA8C;AAC7C;AACA;;AAEDA,MAAAA,MAAM,CAACM,KAAP;AACA;;AAEDH,IAAAA,WAAW,CAACI,gBAAZ,CAA8B,MAA9B,EAAsCH,UAAtC;AAEA,WAAO,MAAM;AACZD,MAAAA,WAAW,CAACK,mBAAZ,CAAiC,MAAjC,EAAyCJ,UAAzC;AACA,KAFD;AAGA,GAtBQ,EAsBN,EAtBM,CAAT,CAJkE,CA4BlE;AACA;AACA;AACA;;AACA,SAAO;AAAQ,IAAA,GAAG,EAAGL;AAAd,KAAyBF,KAAzB,EAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useMergeRefs } from '@wordpress/compose';\n\nexport default function FocusableIframe( { iframeRef, ...props } ) {\n\tconst fallbackRef = useRef();\n\tconst ref = useMergeRefs( [ iframeRef, fallbackRef ] );\n\n\tuseEffect( () => {\n\t\tconst iframe = fallbackRef.current;\n\t\tconst { ownerDocument } = iframe;\n\t\tconst { defaultView } = ownerDocument;\n\n\t\t/**\n\t\t * Checks whether the iframe is the activeElement, inferring that it has\n\t\t * then received focus, and calls the `onFocus` prop callback.\n\t\t */\n\t\tfunction checkFocus() {\n\t\t\tif ( ownerDocument.activeElement !== iframe ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tiframe.focus();\n\t\t}\n\n\t\tdefaultView.addEventListener( 'blur', checkFocus );\n\n\t\treturn () => {\n\t\t\tdefaultView.removeEventListener( 'blur', checkFocus );\n\t\t};\n\t}, [] );\n\n\t// Disable reason: The rendered iframe is a pass-through component,\n\t// assigning props inherited from the rendering parent. It's the\n\t// responsibility of the parent to assign a title.\n\t// eslint-disable-next-line jsx-a11y/iframe-has-title\n\treturn <iframe ref={ ref } { ...props } />;\n}\n"]}